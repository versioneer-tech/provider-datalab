
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://versioneer-tech.github.io/provider-datalab/0.2.0/how-to-guides/usage_concepts/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../installation/">
      
      
      <link rel="icon" href="../../imgs/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Usage & Concepts - provider-datalab</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#provider-datalab-usage-concepts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="provider-datalab" class="md-header__button md-logo" aria-label="provider-datalab" data-md-component="logo">
      
  <img src="../../imgs/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            provider-datalab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage & Concepts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/versioneer-tech/provider-datalab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    versioneer-tech/provider-datalab
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="provider-datalab" class="md-nav__button md-logo" aria-label="provider-datalab" data-md-component="logo">
      
  <img src="../../imgs/logo.png" alt="logo">

    </a>
    provider-datalab
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/versioneer-tech/provider-datalab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    versioneer-tech/provider-datalab
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-to guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            How-to guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Usage & Concepts
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Usage & Concepts
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    <span class="md-ellipsis">
      Persistence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-and-the-workshop-tab" class="md-nav__link">
    <span class="md-ellipsis">
      Files and the Workshop Tab
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vcluster-toggle" class="md-nav__link">
    <span class="md-ellipsis">
      vcluster toggle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Secret
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-and-access-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Access Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Quotas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity-and-keycloak-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Identity and Keycloak Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-joe-no-session-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Joe (no session by default)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-jeff-and-jim-shared-session-privileged-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Jeff and Jim (shared session, privileged with Docker)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-jane-isolated-vcluster-with-admin-role-and-higher-quota" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Jane (isolated vcluster with admin role and higher quota)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-john-with-git-based-workshop-files" class="md-nav__link">
    <span class="md-ellipsis">
      Example: John (with Git-based workshop files)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying Provisioning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verifying Provisioning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-composite-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check Composite Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-the-storage-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Find the Storage Secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../additional_services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Additional Services
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference-guides/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    <span class="md-ellipsis">
      Persistence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-and-the-workshop-tab" class="md-nav__link">
    <span class="md-ellipsis">
      Files and the Workshop Tab
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vcluster-toggle" class="md-nav__link">
    <span class="md-ellipsis">
      vcluster toggle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Secret
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-and-access-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Access Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Quotas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity-and-keycloak-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Identity and Keycloak Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-joe-no-session-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Joe (no session by default)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-jeff-and-jim-shared-session-privileged-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Jeff and Jim (shared session, privileged with Docker)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-jane-isolated-vcluster-with-admin-role-and-higher-quota" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Jane (isolated vcluster with admin role and higher quota)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-john-with-git-based-workshop-files" class="md-nav__link">
    <span class="md-ellipsis">
      Example: John (with Git-based workshop files)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying Provisioning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verifying Provisioning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-composite-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check Composite Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-the-storage-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Find the Storage Secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="provider-datalab-usage-concepts">Provider Datalab – Usage &amp; Concepts</h1>
<p>This section explains how to <strong>use</strong> the <code>provider-datalab</code> configuration packages once they are installed. It focuses on the <strong>concepts</strong> of Sessions, Files, vclusters, Storage Secrets, and the required <strong>Keycloak integration</strong> for identity and access.</p>
<hr />
<h2 id="concepts">Concepts</h2>
<h3 id="sessions">Sessions</h3>
<p>A <code>Datalab</code> claim may declare one or more <code>spec.sessions</code>.  </p>
<ul>
<li>If at least one session is listed, a corresponding <strong>WorkshopSession</strong> is automatically created and will run permanently until stopped by the operator.  </li>
<li>If no sessions are given, no runtime will be started; users must explicitly launch a session themselves (<code>auto</code> mode).  </li>
</ul>
<p>Sessions can also be patched into the spec later if needed.</p>
<h3 id="persistence">Persistence</h3>
<p>Each <code>Datalab</code> session is equipped with a <strong>persistent volume</strong> for storing files, in addition to the connected object storage.  This ensures that user data and session state are preserved even if the workshop pod is restarted or rescheduled by Kubernetes.  Installing code libraries, handling metadata, or working with Git repositories often generates many small files that may be updated frequently. A storage class providing <strong>NFS-like capabilities</strong> is usually a good fit for these kinds of workloads, <strong>object storage</strong> abstractions are not.</p>
<p>The <strong>persistent volume claim (PVC)</strong> is <strong>tied to the active session</strong> and will be deleted automatically when the workshop session shuts down (for example, through a culling process when using session mode <code>auto</code>). This does <strong>not necessarily mean that data is lost</strong> — when the session is restarted from the same manifests, Kubernetes will recreate the PVC with the same name, reattaching it to the existing data in environments that use an <strong>NFS server</strong> or another <strong>shared storage backend</strong>, since the PVC will point to the <strong>same physical folder</strong>.</p>
<p>This behavior works as long as the associated <code>StorageClass</code> has its <code>reclaimPolicy</code> set to <code>Retain</code> (not <code>Delete</code>), ensuring that data is not removed externally. It also depends on maintaining a <strong>consistent link between the PVC name and the actual storage path</strong>.  If the underlying storage system assigns <strong>randomized volume identifiers</strong> (such as UIDs for folder paths), the data will still remain on the storage backend after the session ends, but Kubernetes will not automatically reattach it to a new PVC — manual reassociation may then be required.</p>
<h3 id="authentication">Authentication</h3>
<p>Access to a <code>Datalab</code> session is restricted, with the environment configuration determining the authentication strategy. By default, the same credentials used to access the connected object storage buckets are also applied for session login. Authentication can be globally disabled by setting <code>auth.type = none</code>, for example, in air-gapped environments or when access is already secured at the ingress level through other mechanisms.  </p>
<p>Each <code>Datalab</code> automatically provisions a dedicated Keycloak <strong>OAuth2 client</strong>, which can be used to protect the session using standard <strong>OIDC</strong> flows.<br />
Full integration and automated configuration of this setup are planned for future releases.</p>
<h3 id="files-and-the-workshop-tab">Files and the Workshop Tab</h3>
<p>The <code>spec.files</code> array is optional.  </p>
<ul>
<li>When empty or omitted, <strong>no workshop tab</strong> is rendered in the Educates UI.  </li>
<li>When at least one source is defined, workshop and/or data content is mounted and the tab is enabled.</li>
</ul>
<p>Supported sources:</p>
<ul>
<li><strong>OCI image</strong> (<code>spec.files[].image</code>)  </li>
<li><strong>Git repository</strong> (<code>spec.files[].git</code>)  </li>
<li><strong>HTTP(S) download</strong> (<code>spec.files[].http</code>)  </li>
</ul>
<p>Filters (<code>includePaths</code>, <code>excludePaths</code>, <code>newRootPath</code>, <code>path</code>) control what ends up visible.</p>
<h3 id="vcluster-toggle">vcluster toggle</h3>
<p><code>spec.vcluster</code> is a boolean flag.<br />
- <code>true</code> → the datalab provisions a vcluster for runtime isolation.<br />
- <code>false</code> → workloads run directly in the namespace.</p>
<h3 id="storage-secret">Storage Secret</h3>
<p>A Datalab requires credentials to an S3-compatible storage system.<br />
Credentials are expected to exist in a Kubernetes Secret named via <code>spec.secretName</code>, in the same namespace as the Datalab.  </p>
<p>This secret must include at least the <code>access_key</code> and <code>access_secret</code>. The endpoint and provider are defined in <code>EnvironmentConfig.data.storage</code>.</p>
<h3 id="security-and-access-policy">Security and Access Policy</h3>
<p>The <code>spec.security</code> section controls access permissions and runtime privilege level for sessions.</p>
<p>Key fields:</p>
<ul>
<li><code>policy</code> — defines Pod Security Standard (<code>restricted</code>, <code>baseline</code>, <code>privileged</code>).  </li>
<li><code>privileged</code> enables Docker-in-Docker with 20 Gi of local storage.  </li>
<li><code>kubernetesAccess</code> — whether a Kubernetes service account token is mounted inside the session.  </li>
<li><code>kubernetesRole</code> — defines in-namespace RBAC level (<code>admin</code>, <code>edit</code>, <code>view</code>).  </li>
</ul>
<h3 id="resource-quotas">Resource Quotas</h3>
<p>The <code>spec.quota</code> section allows per-Datalab overrides of default compute and storage budgets.  </p>
<ul>
<li><code>memory</code> — memory allocation per session (default 2 Gi).  </li>
<li><code>storage</code> — persistent volume size (default 1 Gi).  </li>
<li><code>budget</code> — Educates resource budget profile (<code>small</code>, <code>medium</code>, <code>large</code>, <code>x-large</code>, etc.).  </li>
</ul>
<p>When unspecified, defaults from the EnvironmentConfig apply.</p>
<table>
<thead>
<tr>
<th>Budget</th>
<th>CPU</th>
<th>Memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>small</td>
<td>1000m</td>
<td>1Gi</td>
</tr>
<tr>
<td>medium</td>
<td>2000m</td>
<td>2Gi</td>
</tr>
<tr>
<td>large</td>
<td>4000m</td>
<td>4Gi</td>
</tr>
<tr>
<td>x-large</td>
<td>8000m</td>
<td>8Gi</td>
</tr>
<tr>
<td>xx-large</td>
<td>8000m</td>
<td>12Gi</td>
</tr>
<tr>
<td>xxx-large</td>
<td>8000m</td>
<td>16Gi</td>
</tr>
</tbody>
</table>
<h3 id="identity-and-keycloak-resources">Identity and Keycloak Resources</h3>
<p>Users listed under <code>spec.users</code> must already exist in Keycloak.<br />
When a Datalab is created, the composition also provisions the required <strong>Keycloak resources</strong>:</p>
<ul>
<li>A <strong>Group</strong> for the datalab  </li>
<li><strong>Group memberships</strong> for the listed users  </li>
<li>A <strong>Client</strong> and <strong>Role</strong> to protect access to the datalab and installed tooling  </li>
</ul>
<p>This ensures that authentication and authorization are consistently enforced across the runtime and UI.</p>
<hr />
<h2 id="example-joe-no-session-by-default">Example: Joe (no session by default)</h2>
<pre><code class="language-yaml"># Joe gets a personal datalab s-joe with no pre-created session.
# He must explicitly start a session himself; nothing is running by default.
# No vcluster is provisioned and no workshop files are attached.
# Credentials to storage are expected to exist in a secret &quot;joe&quot; in the same namespace.
# A Keycloak group, role, and client are created; user &quot;joe&quot; must exist in Keycloak.
apiVersion: pkg.internal/v1beta1
kind: Datalab
metadata:
  name: s-joe
spec:
  users:
  - joe
  secretName: joe
</code></pre>
<ul>
<li>Joe’s Datalab exists but is idle until he launches a session.  </li>
<li>Useful for lightweight, on-demand environments.  </li>
<li>Keycloak ensures Joe is authorized to access his workspace.  </li>
</ul>
<hr />
<h2 id="example-jeff-and-jim-shared-session-privileged-with-docker">Example: Jeff and Jim (shared session, privileged with Docker)</h2>
<pre><code class="language-yaml"># Jeff and Jim share a datalab s-jeff with one default shared session
# automatically created. That session will run permanently until stopped by the operator.
# The lab does not use a vcluster and has no workshop files.
# Credentials to storage are expected to exist in a secret &quot;jeff&quot; in the same namespace.
# A Keycloak group, role, and client are created; users &quot;jeff&quot; and &quot;jim&quot; must exist in Keycloak.
# This configuration runs the lab in privileged mode:
# - Security policy: &quot;privileged&quot; → automatically enables Docker with 20 Gi workspace storage.
# - Kubernetes API access is disabled (kubernetesAccess=false).
apiVersion: pkg.internal/v1beta1
kind: Datalab
metadata:
  name: s-jeff
spec:
  users:
  - jeff
  - jim
  secretName: jeff
  sessions:
  - default
  vcluster: false
  security:
    policy: privileged
    kubernetesAccess: false
  quota:
    memory: 4Gi
    storage: 5Gi
    budget: large
  files: []
</code></pre>
<ul>
<li>A long-running session is started immediately, shared by both users.  </li>
<li>Runs in <strong>privileged mode</strong> with <strong>Docker support</strong> and increased ephemeral disk (20 Gi).  </li>
<li><strong>No Kubernetes API access</strong> is granted inside the environment.  </li>
<li>Access is secured through the corresponding Keycloak group and role.  </li>
</ul>
<hr />
<h2 id="example-jane-isolated-vcluster-with-admin-role-and-higher-quota">Example: Jane (isolated vcluster with admin role and higher quota)</h2>
<pre><code class="language-yaml"># Jane runs a datalab s-jane with a default session automatically created.
# That session will run permanently until stopped by the operator,
# and a dedicated vcluster is provisioned for runtime isolation.
# No workshop files are attached. Credentials to storage are expected
# to exist in a secret &quot;jane&quot; in the same namespace.
# A Keycloak group, role, and client are created; user &quot;jane&quot; must exist in Keycloak.
# This configuration explicitly overrides default resource quotas and security settings:
# - Session quota: increased to 4 Gi memory, 10 Gi storage, budget class &quot;x-large&quot;.
# - Kubernetes role: elevated to &quot;admin&quot; for full namespace permissions.
apiVersion: pkg.internal/v1beta1
kind: Datalab
metadata:
  name: s-jane
spec:
  users:
  - jane
  secretName: jane
  sessions: 
  - default
  vcluster: true
  security:
    policy: baseline
    kubernetesAccess: true
    kubernetesRole: admin
  quota:
    memory: 8Gi
    storage: 10Gi
    budget: x-large
</code></pre>
<ul>
<li>Jane’s workloads run inside an <strong>isolated virtual cluster</strong> (<code>vcluster: true</code>).  </li>
<li>The <strong>admin role</strong> grants full control within her namespace/vcluster.  </li>
<li>Increased quota provides additional compute and storage capacity.  </li>
<li>Suitable for advanced development or testing requiring full Kubernetes control.  </li>
<li>Keycloak enforces role-based access protection for this lab.  </li>
</ul>
<hr />
<h2 id="example-john-with-git-based-workshop-files">Example: John (with Git-based workshop files)</h2>
<pre><code class="language-yaml"># John has a datalab s-john with a default session automatically created.
# That session will run permanently until stopped by the operator.
# No vcluster is provisioned. Workshop and data files are pulled from Git,
# enabling the workshop tab in the Educates UI.
# Credentials to storage are expected in a secret &quot;john&quot; in the same namespace.
# A Keycloak group, role, and client are created; user &quot;john&quot; must exist in Keycloak.
apiVersion: pkg.internal/v1beta1
kind: Datalab
metadata:
  name: s-john
spec:
  users:
  - john
  secretName: john
  sessions:
  - default
  vcluster: false
  files:
  - git:
      url: https://github.com/versioneer-tech/datalab-example
      ref: origin/main
    includePaths:
    - /workshop/**
    - /data/**
    - /README.md
    path: .
</code></pre>
<ul>
<li>Preloads workshop materials from Git.  </li>
<li>Activates the workshop tab in the UI for guided exercises.  </li>
<li>Keycloak ensures only John has access to this environment and tooling.  </li>
</ul>
<hr />
<h2 id="verifying-provisioning">Verifying Provisioning</h2>
<p>Once a <code>Datalab</code> claim has been applied, you can verify that the provisioning worked.</p>
<h3 id="check-composite-status">Check Composite Status</h3>
<pre><code class="language-bash">kubectl get datalabs -n workspace
</code></pre>
<p>You should see all Datalabs <code>READY=True</code> once reconciliation is complete:</p>
<pre><code>NAME       SYNCED   READY   COMPOSITION       AGE
s-joe      True     True    datalab-educates  2m
s-jeff     True     True    datalab-educates  2m
s-jane     True     True    datalab-educates  2m
s-john     True     True    datalab-educates  2m
</code></pre>
<p>Inspect details:</p>
<pre><code class="language-bash">kubectl describe datalab s-jeff -n workspace
</code></pre>
<p>Look for conditions like <code>Ready=True</code> and any event messages.</p>
<h3 id="find-the-storage-secret">Find the Storage Secret</h3>
<p>Each Datalab references a <strong>Secret in the same namespace</strong> via <code>spec.secretName</code>.<br />
For example, the claim <code>s-jeff</code> with <code>secretName: jeff</code> requires a Secret named <code>jeff</code>.</p>
<pre><code class="language-bash">kubectl get secret jeff -n workspace -o yaml
</code></pre>
<p>Decode credentials (AWS-style):</p>
<pre><code class="language-bash">kubectl get secret jeff -n workspace -o jsonpath='{.data.AWS_ACCESS_KEY_ID}' | base64 -d; echo
kubectl get secret jeff -n workspace -o jsonpath='{.data.AWS_SECRET_ACCESS_KEY}' | base64 -d; echo
</code></pre>
<hr />
<h2 id="summary">Summary</h2>
<ul>
<li>A <code>Datalab</code> defines users, sessions, optional vcluster, quotas, and security policies.  </li>
<li>Security controls combine <strong>Pod Security Standards</strong>, <strong>Kubernetes roles</strong>, and <strong>Docker privilege</strong> toggles.  </li>
<li>Each Datalab requires a storage credential Secret.  </li>
<li>Users must already exist in Keycloak; the Datalab provisions groups, memberships, a client, and a role.  </li>
<li>Sessions may be long-lived (auto-created) or on-demand (user started).  </li>
<li>Workshop files enable the Educates UI workshop tab.  </li>
<li>Check <code>kubectl get datalabs</code> for readiness and confirm Secret and Keycloak resource creation.  </li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025, Versioneer
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>